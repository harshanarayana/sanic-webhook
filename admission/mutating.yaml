apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: admission-demo
webhooks:
  - admissionReviewVersions:
      - v1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURhRENDQWxDZ0F3SUJBZ0lSQUwyVDFpSFpmcVJqazNvS2FLaHhSRlV3RFFZSktvWklodmNOQVFFTEJRQXcKSHpFZE1Cc0dBMVVFQXd3VUtpNWhaRzFwYzNOcGIyNHRaR1Z0Ynk1emRtTXdIaGNOTWpJd01qSXlNVGd6TlRNMgpXaGNOTWpJd05USXpNVGd6TlRNMldqQWZNUjB3R3dZRFZRUUREQlFxTG1Ga2JXbHpjMmx2Ymkxa1pXMXZMbk4yCll6Q0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU12enlQeko0d05iWGlCQllmbnAKRzVidGVyK2lYQlZEMVZWTFAvVHlKN0xHY0xWUW8xbC81MUxWK0VWcmNhSDVlMzArb2d4ZDBpR1lnSDRxekZZOApOSyt3dGhHY2ZoVEZNbXUzWlhqQU9WSHJxS3dKeFFPRW5mL2Q5UkRjaHk3bFZIZnl5NkM5YVlqTlA3a2tvNXhnCjU1YmhsbEpOSWZwOG1POERSb0tpTFNwdVJpd3hySE9WZkJmaVlPZGdycDlpbnRFU0R1aVR1VnZjdTM3YWhveGUKd1ZKdStGdXQ0dXhlZGdCZlpoNUhVTnVsK0lEWUpma0VxQmM4RXBVRXl0MFIyWW1HVGpTN2RXTlFPbHVCTU5rcApVbFI0Ujdlcm91MjR0QVFEd00vSEduT1Z2bEFLWnJ6ZEwyWWNyc1U1djNuNERsNVg0aEduVS9GcmNhbTUyb1d0ClNDRUNBd0VBQWFPQm5qQ0JtekFPQmdOVkhROEJBZjhFQkFNQ0FnUXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUgKQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZLWUV5a0ZMUjRUNApqUXJKa3J5N1RaM1R5SHZRTURvR0ExVWRFUVF6TURHQ0EyRndhWUlTWVhCcExtRmtiV2x6YzJsdmJpMWtaVzF2CmdoWmhjR2t1WVdSdGFYTnphVzl1TFdSbGJXOHVjM1pqTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFBVEU2VFQKTHhibVEzeWhKekM1OHNYZDUyZTIxeTlKZzVNcjFrdDdsVTNpdDNiMzBKRmY1NFdMKzdqcGhTK3lIa0d0ZE0vNgpSWEY4Tld3SmxENVU1dHIxZjAyTG9qYTNWWHI2ZGZ0ODJhcnZXSzlkdWdLSEd6S1lpUXplck9GWE4xSFd1bTQxCm0wME5Ed2lsYlNnaldqQlV3RzUxMDluRUJEbWxkTnc0QXJZMk5pMXg4dG0zUTlrbGtuaG5TN29XZlE4ZVNyM0oKZ1Z0b0VPMmdyRXArVFBEdC8vSitCakd2cnc5SU5OZy9RZS9GTVE5cEFsTk1RSXRWcTIxUm5DM3hTOEZTam9iegpXdDFNRk1EN1pkZGRJbkc2eUVBNEpBNW1LTE9BaEw2N2tMTjR5ekdmeGtPWGl0MzdXTTdQb0MzbFpIYTNENDdMCjFpcEdGVHJpa21ramYza0sKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
      service:
        name: api
        namespace: admission-demo
        path: /disallow-host-mounts
        port: 443
    name: disallow-host-mounts.mks.admission
    sideEffects: None
    failurePolicy: Fail
    matchPolicy: Equivalent
    timeoutSeconds: 5
    rules:
      - apiGroups:
          - "apps"
        apiVersions:
          - "v1"
        operations:
          - CREATE
        resources:
          - deployments
        scope: "Namespaced"
    namespaceSelector:
      matchExpressions:
        - key: ignore-admission
          operator: DoesNotExist